<!DOCTYPE html>
<html>
<head>
    <title>Video Configuration</title>
    <meta charset="utf-8">
    <link href="../base1/bootstrap.min.css" type="text/css" rel="stylesheet">
    <script src="../base1/cockpit.js"></script>
</head>

<body>
    <div class="pf-c-page">
        <main class="pf-c-page__main" tabindex="-1">
            <section class="pf-c-page__main-section pf-m-light">

                <div class="row justify-content-start">
                    <div class="col-lg-12 ms-3"><p class="fw-bold fs-2 mt-3 mb-0">Video Configuration</p> </div>                    
                   
                    <div class="col-lg-12 ms-3"><p class="mt-1 me-3">Use the settings below to change the video streaming settings. To disable a stream, enter 0 for the birate.</p></div>
                    <div class="col-lg-12 ms-3"><p class="mt-1 me-3">The MK1 in this configuration is designed to be used with a Raptor 360 + TRIP6 module set up with TRIP6 firmware v.1.11.10+ and one of the streams pointing to this IP address (<strong><span id='myIP'></span></strong>).</p></div>
                    <div class="col-lg-12 ms-3"><p class="mt-1 me-3">The TRIP6 Settings must match those below:</p>
                        <ul>
                            <li>Channel-0 Settings > Video > Encapsulation Format = RTP/AVP</li>
                            <li>Channel-0 Settings > Video > Destination IP = The endpoint of the primary local GCS</li>
                            <li>Channel-0 Settings > Video > Destination Port = The port used by the GCS to receive video, typically 5600</li>
                            <li>Channel-0 Settings > Video > 2nd Stream Enable = CHECKED</li>
                            <li>Channel-0 Settings > Video > 2nd Stream Destination IP = The IP address of this EchoPilot AI device (<span id='myIP2'></span>) (multicast groups can be used as well)</li>
                            <li>Channel-0 Settings > Video > 2nd Stream Destination Port = The port you wish to receive video on with this app, must match the setting below. Default 7000</li>
                            <li>Recommend Channel Settings > Encoder Settings > Stream Bitrate [kbps] of 2000</li>
                        </ul>
                    </div>

                    
                <div class="row justify-content-start">
                    <div class="col ms-3"><p class="fw-bold fs-5 mt-3 mb-0"><img src="settings_ethernet.svg" class="me-2">Gimbal Stream Setup</p><p class="fw-light fs-6">Input the port used to received video from the TRIP6 system onboard the MK1. This should match the Channel-0-Settings > Video > 2nd Stream Destination Port on the TRIP6 configuration page. Default value is 7000.</p></div>   
                </div>

                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><label class="control-label" for="gimbalPort">TRIP6 Receive Port</label></div>
                    <div class="col mt-3"><input id="gimbalPort"></div></div>
                </div>

                <div class="row justify-content-start">
                    <div class="col ms-3"><p class="fw-bold fs-5 mt-3 mb-0"><img src="settings_ethernet.svg" class="me-2">Server Stream Setup</p><p class="fw-light fs-6">Input the parameters to control the cloud video stream. Use of this stream requires the MK1 to have internet connection. For LTE, it is recommended to use the lowest bitrate which provides acceptable quality. The Stream Name is a unique ID for the video stream, typically set to the aircraft's serial number.</p></div>   
                </div>

                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><label class="control-label" for="videoHost">Server URL</label></div>
                    <div class="col mt-3"><input id="videoHost"></div>
                </div>
                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><label class="control-label" for="videoPort">Port</label></div>
                    <div class="col mt-3"><input id="videoPort"></div>
                </div>

                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><label class="control-label" for="videoBitrate">Bitrate</label></div>
                    <div class="col mt-3"><select id="videoBitrate"></select></div>
                </div>


                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><label class="control-label" for="videoName">Stream Name</label></div>
                    <div class="col mt-3"><input id="videoName"></div></div>
                </div>
              
                <div class="row justify-content-start">
                    <div class="col-2 ms-3 mt-3"><button class="btn-primary" id="save">Save/Update</button></div>
                    <div class="col mt-3"><span id="result"></span></div>
                </div>


                <pre id="output"></pre>
            </section>
        </main>
    </div>

    <script src="video.js"></script>
</body>
</html>

